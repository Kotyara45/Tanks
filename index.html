<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–Ω—á–∏–∫–∏</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            background-color: #a2d149;  /* –ó–∞–¥–Ω—ñ–π —Ñ–æ–Ω - —Ç—Ä–∞–≤–∞ */
            display: block;
        }

        #menu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.7);
            padding: 20px;
            text-align: center;
            color: white;
            font-size: 24px;
            display: none; /* –°–ø–æ—á–∞—Ç–∫—É –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ */
        }

        #gameOverMessage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 36px;
            color: red;
            display: none;
        }

        /* –°—Ç–∏–ª—ñ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –∫–Ω–æ–ø–æ–∫ */
        .mobile-controls {
            position: absolute;
            z-index: 1;
        }

        .mobile-controls button {
            width: 60px;
            height: 60px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 18px;
        }

        /* –ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä—à–æ–≥–æ –≥—Ä–∞–≤—Ü—è (–∑–Ω–∏–∑—É –ª—ñ–≤–æ—Ä—É—á) */
        #controls-player1 {
            bottom: 10px;
            left: 10px;
        }

        #controls-player1 button {
            margin: 5px;
        }

        /* –ö–Ω–æ–ø–∫–∏ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –≥—Ä–∞–≤—Ü—è (–∑–≤–µ—Ä—Ö—É –ø—Ä–∞–≤–æ—Ä—É—á) */
        #controls-player2 {
            top: 10px;
            right: 10px;
        }

        #controls-player2 button {
            margin: 5px;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="menu">
        <h1>–ú–µ–Ω—é</h1>
        <button id="startButton">–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≥—Ä—É</button><br><br>
        <button id="toggleSoundButton">–í–∏–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫</button><br><br>
        <button id="exitButton">–í–∏–π—Ç–∏</button>
    </div>
    <div id="gameOverMessage"></div>

    <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –∫–µ—Ä—É–≤–∞–Ω–Ω—è -->
    <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä—à–æ–≥–æ –≥—Ä–∞–≤—Ü—è -->
    <div id="controls-player1" class="mobile-controls">
        <button id="p1-up">‚ñ≤</button><br>
        <button id="p1-left">‚óÄ</button>
        <button id="p1-shoot">üî´</button>
        <button id="p1-right">‚ñ∂</button><br>
        <button id="p1-down">‚ñº</button>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –≥—Ä–∞–≤—Ü—è -->
    <div id="controls-player2" class="mobile-controls">
        <button id="p2-up">‚ñ≤</button><br>
        <button id="p2-left">‚óÄ</button>
        <button id="p2-shoot">üî´</button>
        <button id="p2-right">‚ñ∂</button><br>
        <button id="p2-down">‚ñº</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const menu = document.getElementById('menu');
        const gameOverMessage = document.getElementById('gameOverMessage');
        let soundEnabled = true;
        let gameRunning = false;
        let gameOver = false;

        // –ü–æ–∫–∞–∑–∞—Ç–∏ –º–µ–Ω—é –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        window.onload = function() {
            menu.style.display = 'block';
        };

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const tankSize = 40;
        const bulletSize = 8;  // –†–æ–∑–º—ñ—Ä —Å–Ω–∞—Ä—è–¥–∞ 8 –ø—ñ–∫—Å–µ–ª—ñ–≤
        const speed = 3;
        const bulletSpeed = 5;
        const roadWidth = 200;
        const shootSound = new Audio('shoot-sound.mp3'); // –ó–≤—É–∫ 1-–≥–æ –≥—Ä–∞–≤—Ü—è
        const shootSound2 = new Audio('shoot-sound2.mp3'); // –ó–≤—É–∫ 2-–≥–æ –≥—Ä–∞–≤—Ü—è
        const moveSound = new Audio('move-sound.mp3');  // –ó–≤—É–∫ —ó–∑–¥–∏ —Ç–∞–Ω–∫–∞
        moveSound.loop = true;  // –ó–≤—É–∫ —ó–∑–¥–∏ –ø–æ–≤–∏–Ω–µ–Ω –ø–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏—Å—è
        moveSound.volume = 0.5;  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –≥—É—á–Ω—ñ—Å—Ç—å –Ω–∞ 50%

        const obstacles = [
            { x: canvas.width / 3, y: canvas.height / 2 - 50, width: 100, height: 100 },
            { x: (2 * canvas.width) / 3 - 50, y: canvas.height / 2 - 50, width: 100, height: 100 }
        ];

        const startPosition1 = { x: canvas.width / 2 - tankSize / 2, y: canvas.height - tankSize - 10 };
        const startPosition2 = { x: canvas.width / 2 - tankSize / 2, y: 10 };

        const player1 = {
            ...startPosition1,
            width: tankSize,
            height: tankSize,
            color: 'green',
            keys: { up: 'KeyW', down: 'KeyS', left: 'KeyA', right: 'KeyD', shoot: 'KeyF', rotate: 'KeyR' },
            bullets: [],
            angle: -90,  // –ü–æ–≤–µ—Ä–Ω—É—Ç–∏–π –≤–≥–æ—Ä—É
            canShoot: true,
            shootCooldown: 5000, // 5 —Å–µ–∫—É–Ω–¥
            alive: true,
            isMoving: false  // –î–æ–¥–∞—î–º–æ —Å—Ç–∞—Ç—É—Å —Ä—É—Ö—É –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –∑–≤—É–∫—É
        };

        const player2 = {
            ...startPosition2,
            width: tankSize,
            height: tankSize,
            color: 'blue',
            keys: { up: 'KeyI', down: 'KeyK', left: 'KeyJ', right: 'KeyL', shoot: 'KeyH', rotate: 'KeyU' },
            bullets: [],
            angle: 90,  // –ü–æ–≤–µ—Ä–Ω—É—Ç–∏–π –≤–Ω–∏–∑
            canShoot: true,
            shootCooldown: 5000, // 5 —Å–µ–∫—É–Ω–¥
            alive: true,
            isMoving: false  // –°—Ç–∞—Ç—É—Å —Ä—É—Ö—É
        };

        const players = [player1, player2];

        const keysPressed = {};
        window.addEventListener('keydown', (e) => {
            keysPressed[e.code] = true;

            if (e.code === 'Escape') {
                toggleMenu();
            } else if (e.code === 'Space' && gameOver) {
                restartGame();  // –ü–æ—á–∞—Ç–∏ –Ω–æ–≤—É –≥—Ä—É –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –ø—Ä–æ–±—ñ–ª—É
            }
        });
        window.addEventListener('keyup', (e) => {
            keysPressed[e.code] = false;
        });

        // –î–æ–¥–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –∫–Ω–æ–ø–æ–∫
        document.getElementById('p1-up').addEventListener('touchstart', () => keysPressed['KeyW'] = true);
        document.getElementById('p1-up').addEventListener('touchend', () => keysPressed['KeyW'] = false);
        document.getElementById('p1-down').addEventListener('touchstart', () => keysPressed['KeyS'] = true);
        document.getElementById('p1-down').addEventListener('touchend', () => keysPressed['KeyS'] = false);
        document.getElementById('p1-left').addEventListener('touchstart', () => keysPressed['KeyA'] = true);
        document.getElementById('p1-left').addEventListener('touchend', () => keysPressed['KeyA'] = false);
        document.getElementById('p1-right').addEventListener('touchstart', () => keysPressed['KeyD'] = true);
        document.getElementById('p1-right').addEventListener('touchend', () => keysPressed['KeyD'] = false);
        document.getElementById('p1-shoot').addEventListener('touchstart', () => keysPressed['KeyF'] = true);
        document.getElementById('p1-shoot').addEventListener('touchend', () => keysPressed['KeyF'] = false);

        document.getElementById('p2-up').addEventListener('touchstart', () => keysPressed['KeyI'] = true);
        document.getElementById('p2-up').addEventListener('touchend', () => keysPressed['KeyI'] = false);
        document.getElementById('p2-down').addEventListener('touchstart', () => keysPressed['KeyK'] = true);
        document.getElementById('p2-down').addEventListener('touchend', () => keysPressed['KeyK'] = false);
        document.getElementById('p2-left').addEventListener('touchstart', () => keysPressed['KeyJ'] = true);
        document.getElementById('p2-left').addEventListener('touchend', () => keysPressed['KeyJ'] = false);
        document.getElementById('p2-right').addEventListener('touchstart', () => keysPressed['KeyL'] = true);
        document.getElementById('p2-right').addEventListener('touchend', () => keysPressed['KeyL'] = false);
        document.getElementById('p2-shoot').addEventListener('touchstart', () => keysPressed['KeyH'] = true);
        document.getElementById('p2-shoot').addEventListener('touchend', () => keysPressed['KeyH'] = false);

        // –û–Ω–æ–≤–ª–µ–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó, –ª–æ–≥—ñ–∫–∞ –≥—Ä–∏, —Ç–∞ —ñ–Ω—à—ñ —á–∞—Å—Ç–∏–Ω–∏ –∫–æ–¥—É –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –Ω–µ–∑–º—ñ–Ω–Ω–∏–º–∏...
    </script>
</body>
</html>
